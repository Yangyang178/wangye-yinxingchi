<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG转PNG工具</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .icon-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            background: #f9f9f9;
        }
        .icon-preview {
            margin: 10px 0;
        }
        .icon-preview img {
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            padding: 10px;
        }
        .download-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        .download-btn:hover {
            background: #45a049;
        }
        .convert-all-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
        }
        .convert-all-btn:hover {
            background: #1976D2;
        }
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎨 插件图标转换工具</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            将SVG图标转换为PNG格式，确保Chrome扩展程序正确显示
        </p>
        
        <button class="convert-all-btn" onclick="convertAllIcons()">🔄 转换所有图标</button>
        
        <div id="status" class="status" style="display: none;"></div>
        
        <div class="icon-grid">
            <div class="icon-card">
                <h3>16×16 工具栏图标</h3>
                <div class="icon-preview">
                    <canvas id="canvas16" width="16" height="16" style="width: 64px; height: 64px; image-rendering: pixelated;"></canvas>
                </div>
                <button class="download-btn" onclick="downloadIcon(16)">下载 PNG</button>
            </div>
            
            <div class="icon-card">
                <h3>32×32 管理页面图标</h3>
                <div class="icon-preview">
                    <canvas id="canvas32" width="32" height="32" style="width: 64px; height: 64px;"></canvas>
                </div>
                <button class="download-btn" onclick="downloadIcon(32)">下载 PNG</button>
            </div>
            
            <div class="icon-card">
                <h3>48×48 详情页面图标</h3>
                <div class="icon-preview">
                    <canvas id="canvas48" width="48" height="48" style="width: 64px; height: 64px;"></canvas>
                </div>
                <button class="download-btn" onclick="downloadIcon(48)">下载 PNG</button>
            </div>
            
            <div class="icon-card">
                <h3>128×128 应用商店图标</h3>
                <div class="icon-preview">
                    <canvas id="canvas128" width="128" height="128" style="width: 64px; height: 64px;"></canvas>
                </div>
                <button class="download-btn" onclick="downloadIcon(128)">下载 PNG</button>
            </div>
        </div>
        
        <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin-top: 30px;">
            <h3>📋 使用说明</h3>
            <ol>
                <li>点击"转换所有图标"按钮生成PNG格式图标</li>
                <li>分别下载每个尺寸的PNG图标</li>
                <li>将下载的PNG文件重命名并替换icons文件夹中的对应文件</li>
                <li>重新加载Chrome扩展程序即可看到新图标</li>
            </ol>
        </div>
    </div>

    <script>
        // SVG图标数据
        const svgIcons = {
            16: `<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bg16" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect width="16" height="16" rx="3" fill="url(#bg16)"/>
                <rect x="2" y="2" width="12" height="2" rx="1" fill="white" opacity="0.95"/>
                <rect x="2" y="2" width="2" height="12" rx="1" fill="white" opacity="0.95"/>
                <rect x="3" y="5" width="1" height="2" fill="white" opacity="0.7"/>
                <rect x="5" y="5" width="1" height="2" fill="white" opacity="0.7"/>
                <rect x="7" y="5" width="1" height="3" fill="white" opacity="0.9"/>
                <rect x="9" y="5" width="1" height="2" fill="white" opacity="0.7"/>
                <rect x="11" y="5" width="1" height="2" fill="white" opacity="0.7"/>
                <rect x="5" y="3" width="2" height="1" fill="white" opacity="0.7"/>
                <rect x="5" y="5" width="2" height="1" fill="white" opacity="0.7"/>
                <rect x="5" y="7" width="3" height="1" fill="white" opacity="0.9"/>
                <rect x="5" y="9" width="2" height="1" fill="white" opacity="0.7"/>
                <rect x="5" y="11" width="2" height="1" fill="white" opacity="0.7"/>
                <circle cx="10" cy="10" r="2" fill="white" opacity="0.95"/>
                <circle cx="10" cy="10" r="1.5" fill="#fbbf24"/>
                <line x1="6" y1="6" x2="10" y2="10" stroke="white" stroke-width="1" opacity="0.85"/>
                <circle cx="6" cy="6" r="1" fill="#ef4444"/>
            </svg>`,
            32: `<svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bg32" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                        <stop offset="30%" style="stop-color:#6366f1;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect width="32" height="32" rx="6" fill="url(#bg32)"/>
                <rect x="4" y="4" width="24" height="4" rx="2" fill="white" opacity="0.95"/>
                <rect x="4" y="4" width="4" height="24" rx="2" fill="white" opacity="0.95"/>
                <rect x="5" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="7" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="9" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="11" y="9" width="2" height="4" fill="white" opacity="0.9"/>
                <rect x="15" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="17" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="19" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="21" y="9" width="2" height="4" fill="white" opacity="0.9"/>
                <rect x="25" y="9" width="1" height="3" fill="white" opacity="0.7"/>
                <rect x="9" y="5" width="3" height="1" fill="white" opacity="0.7"/>
                <rect x="9" y="7" width="3" height="1" fill="white" opacity="0.7"/>
                <rect x="9" y="9" width="3" height="1" fill="white" opacity="0.7"/>
                <rect x="9" y="11" width="4" height="2" fill="white" opacity="0.9"/>
                <rect x="9" y="15" width="3" height="1" fill="white" opacity="0.7"/>
                <rect x="9" y="17" width="3" height="1" fill="white" opacity="0.7"/>
                <rect x="9" y="19" width="3" height="1" fill="white" opacity="0.7"/>
                <rect x="9" y="21" width="4" height="2" fill="white" opacity="0.9"/>
                <rect x="9" y="25" width="3" height="1" fill="white" opacity="0.7"/>
                <circle cx="20" cy="20" r="3" fill="white" opacity="0.95"/>
                <circle cx="20" cy="20" r="2" fill="#fbbf24"/>
                <line x1="12" y1="12" x2="20" y2="20" stroke="white" stroke-width="2" opacity="0.85"/>
                <circle cx="12" cy="12" r="2" fill="#ef4444"/>
            </svg>`,
            48: `<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bg48" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                        <stop offset="30%" style="stop-color:#6366f1;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect width="48" height="48" rx="8" fill="url(#bg48)"/>
                <rect x="6" y="6" width="36" height="6" rx="3" fill="white" opacity="0.95"/>
                <rect x="6" y="6" width="6" height="36" rx="3" fill="white" opacity="0.95"/>
                <rect x="8" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="12" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="16" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="20" y="14" width="3" height="6" fill="white" opacity="0.9"/>
                <rect x="26" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="30" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="38" y="14" width="2" height="4" fill="white" opacity="0.7"/>
                <rect x="14" y="8" width="4" height="2" fill="white" opacity="0.7"/>
                <rect x="14" y="12" width="4" height="2" fill="white" opacity="0.7"/>
                <rect x="14" y="16" width="4" height="2" fill="white" opacity="0.7"/>
                <rect x="14" y="20" width="6" height="3" fill="white" opacity="0.9"/>
                <rect x="14" y="26" width="4" height="2" fill="white" opacity="0.7"/>
                <rect x="14" y="30" width="4" height="2" fill="white" opacity="0.7"/>
                <rect x="14" y="34" width="4" height="2" fill="white" opacity="0.7"/>
                <rect x="14" y="38" width="4" height="2" fill="white" opacity="0.7"/>
                <circle cx="30" cy="30" r="4" fill="white" opacity="0.95"/>
                <circle cx="30" cy="30" r="3" fill="#fbbf24"/>
                <line x1="18" y1="18" x2="30" y2="30" stroke="white" stroke-width="3" opacity="0.85"/>
                <circle cx="18" cy="18" r="3" fill="#ef4444"/>
                <rect x="22" y="22" width="16" height="8" rx="4" fill="white" opacity="0.95"/>
                <text x="30" y="27" text-anchor="middle" fill="#3b82f6" font-size="6" font-family="Arial" font-weight="bold">24px</text>
            </svg>`,
            128: `<svg width="128" height="128" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bg128" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                        <stop offset="30%" style="stop-color:#6366f1;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                    </linearGradient>
                    <filter id="shadow128" x="-50%" y="-50%" width="200%" height="200%">
                        <feDropShadow dx="0" dy="4" stdDeviation="4" flood-color="#000" flood-opacity="0.2"/>
                    </filter>
                </defs>
                <rect width="128" height="128" rx="20" fill="url(#bg128)" filter="url(#shadow128)"/>
                <rect x="16" y="16" width="96" height="16" rx="8" fill="white" opacity="0.95"/>
                <rect x="16" y="16" width="16" height="96" rx="8" fill="white" opacity="0.95"/>
                <rect x="20" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="28" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="36" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="44" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="52" y="34" width="6" height="14" fill="white" opacity="0.9"/>
                <rect x="62" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="70" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="78" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="86" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="94" y="34" width="6" height="14" fill="white" opacity="0.9"/>
                <rect x="104" y="34" width="4" height="10" fill="white" opacity="0.7"/>
                <rect x="34" y="20" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="28" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="36" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="44" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="52" width="14" height="6" fill="white" opacity="0.9"/>
                <rect x="34" y="62" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="70" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="78" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="86" width="10" height="4" fill="white" opacity="0.7"/>
                <rect x="34" y="94" width="14" height="6" fill="white" opacity="0.9"/>
                <rect x="34" y="104" width="10" height="4" fill="white" opacity="0.7"/>
                <circle cx="80" cy="80" r="12" fill="white" opacity="0.95"/>
                <circle cx="80" cy="80" r="8" fill="#fbbf24"/>
                <circle cx="80" cy="80" r="4" fill="white" opacity="0.9"/>
                <line x1="50" y1="50" x2="80" y2="80" stroke="white" stroke-width="6" opacity="0.85" stroke-linecap="round"/>
                <circle cx="50" cy="50" r="8" fill="white" opacity="0.95"/>
                <circle cx="50" cy="50" r="5" fill="#ef4444"/>
                <text x="50" y="40" text-anchor="middle" fill="white" font-size="12" font-family="Arial" font-weight="bold" opacity="0.9">A</text>
                <text x="80" y="100" text-anchor="middle" fill="white" font-size="12" font-family="Arial" font-weight="bold" opacity="0.9">B</text>
                <rect x="56" y="56" width="40" height="20" rx="10" fill="white" opacity="0.95" filter="url(#shadow128)"/>
                <text x="76" y="69" text-anchor="middle" fill="#3b82f6" font-size="14" font-family="Arial" font-weight="bold">42px</text>
                <circle cx="100" cy="100" r="4" fill="white" opacity="0.3"/>
                <circle cx="108" cy="108" r="3" fill="white" opacity="0.2"/>
                <circle cx="40" cy="40" r="3" fill="white" opacity="0.2"/>
                <line x1="64" y1="16" x2="64" y2="32" stroke="white" stroke-width="1" opacity="0.3"/>
                <line x1="16" y1="64" x2="32" y2="64" stroke="white" stroke-width="1" opacity="0.3"/>
            </svg>`
        };

        function svgToPng(svgString, size, callback) {
            const canvas = document.getElementById(`canvas${size}`);
            const ctx = canvas.getContext('2d');
            
            // 清除画布
            ctx.clearRect(0, 0, size, size);
            
            // 创建图像
            const img = new Image();
            const svgBlob = new Blob([svgString], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);
            
            img.onload = function() {
                ctx.drawImage(img, 0, 0, size, size);
                URL.revokeObjectURL(url);
                if (callback) callback();
            };
            
            img.src = url;
        }

        function convertAllIcons() {
            const status = document.getElementById('status');
            status.style.display = 'block';
            status.className = 'status';
            status.textContent = '正在转换图标...';
            
            let completed = 0;
            const total = Object.keys(svgIcons).length;
            
            Object.keys(svgIcons).forEach(size => {
                svgToPng(svgIcons[size], parseInt(size), () => {
                    completed++;
                    if (completed === total) {
                        status.className = 'status success';
                        status.textContent = '✅ 所有图标转换完成！现在可以下载PNG文件了。';
                    }
                });
            });
        }

        function downloadIcon(size) {
            const canvas = document.getElementById(`canvas${size}`);
            const link = document.createElement('a');
            link.download = `icon${size}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // 页面加载时自动转换
        window.onload = function() {
            setTimeout(convertAllIcons, 500);
        };
    </script>
</body>
</html>